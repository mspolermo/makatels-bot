# Фича getBusSchedule

## Описание

Фича "Получить расписание автобуса" получает разметку сайта с автобусным расписанием через серевер html-parser, обрабатывает данные и возвращает автобусное расписание с филтрами для выбранного направления движения

## Components

`GetBusSchedule` - Главный компонент (расписание + фильтры)

## Model

### Services

`fetchHTML` - Загрузка HTML-разметки сайта с расписанием через эндпойнт на сервере html-parser (воркараунд для CORS)

### Types

`types` - Типизация фильтров и автобусного расписания

## Lib

### Helpers

`parseBusSchedule` - Функция переработки HTML разметки сайта в массив объектов расписания автобусов

`getNearestRoutes` - Функция возврата ближайшего маршрута (Екб/Полевской)

### Hooks

`useBusScheduleHandler` - Хук для управления состоянием и обработки событий

Основные особенности и функции хука:

Инициализация состояния:

busSchedule: состояние, содержащее полное расписание автобусов.
filtredSchedule: состояние, содержащее отфильтрованное расписание автобусов.
activeStatus: состояние, отслеживающее активное состояние фильтра.
mainBtn: состояние, управляющее текстом главной кнопки.
Функции для управления состоянием:

toggleMainButton: функция для переключения главной кнопки и отображения ближайших маршрутов.
handleFilter: функция для фильтрации расписания автобусов в зависимости от выбранного фильтра.
Side Effects:

Хук использует useTelegram для управления кнопкой в Telegram.
Выполняет запрос на получение HTML данных о расписании и парсинг этого расписания при монтировании компонента.

Возвращаемое значение:
Объект с состояниями и функциями для их управления


